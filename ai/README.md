# Alfa Vision

Система подсчета людей в помещении с использованием YOLO и веб-интерфейса. Проект Альфа-Банка для мониторинга посещаемости помещений.

## Возможности

- ✅ Детекция только людей (класс "person" из COCO dataset)
- ✅ Подсчет количества людей в реальном времени
- ✅ Трансляция видеопотока в браузер
- ✅ Сбор статистики (ежеминутно или ежечасно)
- ✅ Визуализация статистики на графике
- ✅ Экспорт статистики в JSON

## Установка

1. Установите зависимости:
```bash
pip install -r ../requirements.txt
```

2. Убедитесь, что модель YOLO (`yolov8l.pt`) находится в папке `ai/`

## Запуск

```bash
cd ai
python app.py
```

Сервер запустится на `http://localhost:5001`

## Использование

1. Откройте браузер и перейдите на `http://localhost:5001`
2. Вы увидите видеопоток с камеры с обведенными людьми
3. В правом верхнем углу отображается текущее количество людей
4. В настройках можно выбрать интервал сбора статистики (1 минута или 1 час)
5. График показывает историю изменений количества людей
6. Кнопка "Экспорт статистики" позволяет скачать данные в JSON

## API Endpoints

- `GET /` - Главная страница
- `GET /video_feed` - Видеопоток (MJPEG)
- `GET /api/statistics` - Текущая статистика
- `GET /api/history` - История статистики
- `GET /api/settings` - Получить настройки
- `POST /api/settings` - Сохранить настройки
- `GET /api/export` - Экспорт статистики в JSON

## Структура проекта

```
ai/
├── app.py              # Flask сервер
├── main.py            # Оригинальный скрипт для обработки видео/изображений
├── yolov8l.pt        # Модель YOLO
├── static/
│   ├── index.html    # Главная страница
│   ├── style.css     # Стили
│   └── script.js     # JavaScript логика
└── README.md         # Этот файл
```

## Примечания

- Камера должна быть доступна (обычно индекс 0)
- Для работы требуется веб-камера или USB-камера
- Статистика сохраняется в памяти (последние 1000 записей)
- Для постоянного хранения статистики можно добавить базу данных

